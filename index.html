<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.8">
    <title>商品一覧ページ</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="hero">
            <h1>商品一覧ページ</h1>
        </div>
    </header>
    <main>
        <div class="product-container">
            <!-- 商品1 -->
            <div class="product">
                <img src="images/2.jpg" alt="商品画像">
                <div class="product-info">
                    <h2 class="title">コイン50万</h2>
                    <p class="description">課金コインを50万(実質的なカンスト)に設定します。</p>
                    <p class="price">¥70</p>
                </div>
                <button class="buy-button">購入</button>
            </div>
            <!-- 商品2 -->
            <div class="product">
                <img src="images/21.jpg" alt="商品画像">
                <div class="product-info">
                    <h2 class="title">マネー5000万</h2>
                    <p class="description">マネーを5000万(実質的なカンスト)に設定します。</p>
                    <p class="price">¥70</p>
                </div>
                <button class="buy-button">購入</button>
            </div>
            <!-- 商品3 -->
            <div class="product">
                <img src="images/6.jpg" alt="商品画像">
                <div class="product-info">
                    <h2 class="title">クラウン1台</h2>
                    <p class="description">クラウンを自身のガレージに追加します。</p>
                    <p class="price">¥100</p>
                </div>
                <button class="buy-button">購入</button>
            </div>
            <!-- 商品4 -->
            <div class="product">
                <img src="images/0.jpg" alt="商品画像">
                <div class="product-info">
                    <h2 class="title">ID変更アカウント(8桁-と数字のみ)</h2>
                    <p class="description">解析能力的に新しいアカウントの作成が限界です...汗</p>
                    <p class="price">¥500</p>
                </div>
                <button class="buy-button">購入</button>
            </div>
            <!-- 商品5 -->
            <div class="product">
                <img src="images/1.jpg" alt="商品画像">
                <div class="product-info">
                    <h2 class="title">メッキ</h2>
                    <p class="description">各種メッキどれか一つとなります。複数ご希望の場合はその分購入をお願いします。</p>
                    <p class="price">¥50</p>
                </div>
                <button class="buy-button">購入</button>
            </div>
            <!-- 商品6 -->
            <div class="product">
                <img src="images/4.jpg" alt="商品画像">
                <div class="product-info">
                    <h2 class="title">馬力変更(ロケットも可)</h2>
                    <p class="description">複数車両やりたい方はその数購入お願いします。</p>
                    <p class="price">¥50</p>
                </div>
                <button class="buy-button">購入</button>
            </div>
            <!-- 商品7 -->
            <div class="product">
                <img src="images/3.jpg" alt="商品画像">
                <div class="product-info">
                    <h2 class="title">キャンバー</h2>
                    <p class="description">複数車両やりたい方はその数購入お願いします。</p>
                    <p class="price">¥50</p>
                </div>
                <button class="buy-button">購入</button>
            </div>
        </div>
    </main>

    <!-- 購入用モーダル -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span id="closeBtn" class="close">&times;</span>
            <h2 id="modal-title">商品名</h2>
            <p id="modal-price">価格: ¥</p>
            <p>送金用リンク（PayPay）</p>
<input type="text" id="paylink" placeholder="https://paypay.ne.jp/...">

<p>ゲームタグ</p>
<input type="text" id="gametag" placeholder="例: #ABC12345">

<p>愛言葉</p>
<input type="text" id="secretword" placeholder="あなたの愛言葉">

<br><br>
<button id="sendBtn" class="buy-button">送信</button>


    <!-- 固定ボタン -->
    <button id="first-button">まずはここ！</button>

    <button id="support-button">サポートなど</button>

    <!-- ニックネーム登録モーダル -->
    <div id="firstModal" class="modal">
        <div class="modal-content">
            <span class="close" id="firstClose">&times;</span>
            <h2>ニックネームを入力してください</h2>
            <input type="text" id="nickname" placeholder="ニックネーム (本名はやめてください)" style="width: 100%; padding: 10px; margin-top: 10px; margin-bottom: 20px;">
            <button class="green-submit" id="firstSubmitBtn">送信</button>
        </div>
    </div>

    <div id="supportModal" class="modal">
  <div class="modal-content">
    <span class="close" id="supportClose">&times;</span>
    <h2>サポート</h2>
    <a href="https://line.me/ti/g2/TDUGTZlMTELXjOIF1o__1o09Sa6PwLcS9S45VA?utm_source=invitation&utm_medium=link_copy&utm_campaign=default" target="_blank">LINEオプチャ</a>
    
    <p style="margin-top: 20px; font-size: 14px; color: #444; line-height: 1.5;">
      返金対応は受け付けません。<br>
      何かあったらサポートチャットまでご連絡ください。
    </p>
  </div>
</div>


    <!-- スクリプトまとめてここに -->
    <script>
    document.addEventListener("DOMContentLoaded", () => {
      const modal = document.getElementById("modal");
      const closeBtn = document.getElementById("closeBtn");
      const sendBtn = document.getElementById("sendBtn");
      const modalTitle = document.getElementById("modal-title");
      const modalPrice = document.getElementById("modal-price");
      const paylinkInput = document.getElementById("paylink");
      const firstModal = document.getElementById("firstModal");
      const firstBtn = document.getElementById("first-button");
      const firstClose = document.getElementById("firstClose");
      const firstSubmitBtn = document.getElementById("firstSubmitBtn");
      const nicknameInput = document.getElementById("nickname");

      let selectedProduct = null;

      document.querySelectorAll(".buy-button").forEach((btn) => {
        btn.addEventListener("click", () => {
          const product = btn.closest(".product");
          const title = product.querySelector(".title").textContent;
          const price = product.querySelector(".price").textContent;

          selectedProduct = { title, price };
          modalTitle.textContent = title;
          modalPrice.textContent = `価格: ${price}`;
          paylinkInput.value = "";
          modal.style.display = "flex";
        });
      });

      closeBtn.onclick = () => modal.style.display = "none";
      firstClose.onclick = () => firstModal.style.display = "none";

      window.onclick = (event) => {
        if (event.target === modal) modal.style.display = "none";
        if (event.target === firstModal) firstModal.style.display = "none";
      };

      sendBtn.onclick = async () => {
  if (!selectedProduct) return;

  const nickname = localStorage.getItem("nickname") || "";
  if (!nickname) {
    alert("『まずはここ！』からニックネームの登録を行ってから再度お願いします。");
    modal.style.display = "none";
    return;
  }

  const paylink = document.getElementById("paylink").value.trim();
  const gametag = document.getElementById("gametag").value.trim();
  const secretword = document.getElementById("secretword").value.trim();

  if (!paylink || !gametag || !secretword) {
    alert("すべてのフォームを入力してください！");
    return;
  }

  const payload = {
    embeds: [
      {
        title: "🛒 購入依頼通知",
        color: 0x5cd65c,
        fields: [
          { name: "📛 ニックネーム", value: `\`${nickname}\`` },
          { name: "📦 商品名", value: `\`${selectedProduct.title}\`` },
          { name: "💰 金額", value: `\`${selectedProduct.price}\`` },
          { name: "🎮 ゲームタグ", value: gametag },
          { name: "🔐 愛言葉", value: secretword },
          { name: "🔗 送金リンク", value: paylink }
        ],
        timestamp: new Date().toISOString()
      }
    ]
  };

  try {
    const webhookURL = "https://discord.com/api/webhooks/xxxxxxxxxxxxxxxxxx"; // 差し替えてね
    await fetch(webhookURL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });
    alert("送信しました！");
    modal.style.display = "none";
  } catch (e) {
    console.error(e);
    alert("送信に失敗しました！");
  }
};


      firstBtn.addEventListener("click", () => {
        firstModal.style.display = "flex";
      });

      firstSubmitBtn.addEventListener("click", async () => {
        const nickname = nicknameInput.value.trim();
        if (!nickname) {
          alert("ニックネームを入力してください！");
          return;
        }

        const payload = {
          embeds: [
            {
              title: "\uD83D\uDE80 ニックネーム登録通知",
              color: 0x5cd65c,
              fields: [
                {
                  name: "\uD83D\uDC9B ニックネーム",
                  value: `\`${nickname}\``
                }
              ],
              timestamp: new Date().toISOString()
            }
          ]
        };

        try {
          const webhookURL = "https://discord.com/api/webhooks/1357979180867911861/BHDfPbyrTmfqc-dM2gak7Dq8X3h3mCsqH7pDB7OeRWzDkDqNxJRyVKOZwTIwUvDnPqns"; // 差し替えてね！
          const res = await fetch(webhookURL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload)
          });

          if (!res.ok) throw new Error("Webhook送信失敗");

alert("ニックネーム送信完了！");
firstModal.style.display = "none";
nicknameInput.value = "";
localStorage.setItem("nickname", nickname); // ← これで保存！


// ← これでローカル保存されます！
localStorage.setItem("nickname", nickname);

    </script>
    <!-- index.html の一番下、</body> の直前がベスト！ -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const supportBtn = document.getElementById("support-button");
    const supportModal = document.getElementById("supportModal");
    const supportClose = document.getElementById("supportClose");

    supportBtn.addEventListener("click", () => {
      supportModal.style.display = "flex";
    });

    supportClose.addEventListener("click", () => {
      supportModal.style.display = "none";
    });

    window.addEventListener("click", (e) => {
      if (e.target === supportModal) {
        supportModal.style.display = "none";
      }
    });
  });
</script>

</body>
</html>
