<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>商品一覧ページ</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="hero">
            <h1>商品一覧ページ</h1>
        </div>
    </header>
    <main>
        <div class="product-container">
            <div class="product">
                <img src="images/2.jpg" alt="商品画像">
                <div class="product-info">
                    <h2 class="title">コイン50万</h2>
                    <p class="description">課金コインを50万(実質的なカンスト)に設定します。</p>
                    <p class="price">¥70</p>
                </div>
                <button class="buy-button">購入</button>
            </div>
            <div class="product">
                <img src="images/21.jpg" alt="商品画像">
                <div class="product-info">
                    <h2 class="title">マネー5000万</h2>
                    <p class="description">マネーを5000万(実質的なカンスト)に設定します。</p>
                    <p class="price">¥70</p>
                </div>
                <button class="buy-button">購入</button>
            </div>
            <div class="product">
                <img src="images/6.jpg" alt="商品画像">
                <div class="product-info">
                    <h2 class="title">クラウン1台</h2>
                    <p class="description">クラウンを自身のガレージに追加します。</p>
                    <p class="price">¥100</p>
                </div>
                <button class="buy-button">購入</button>
            </div>
            <div class="product">
                <img src="placeholder.jpg" alt="商品画像">
                <div class="product-info">
                    <h2 class="title">ID変更アカウント(8桁-と数字のみ)</h2>
                    <p class="description">解析能力的に新しいアカウントの作成が限界です...汗</p>
                    <p class="price">¥500</p>
                </div>
                <button class="buy-button">購入</button>
            </div>
            <div class="product">
                <img src="images/1.jpg" alt="商品画像">
                <div class="product-info">
                    <h2 class="title">メッキ</h2>
                    <p class="description">車両メッキ、ホイールメッキ、窓メッキ、ライトメッキ、キャリパーメッキどれか一つとなります。　複数やりたい方はその数分購入お願いします。</p>
                    <p class="price">¥50</p>
                </div>
                <button class="buy-button">購入</button>
            </div>
            <div class="product">
                <img src="images/4.jpg" alt="商品画像">
                <div class="product-info">
                    <h2 class="title">馬力変更(ロケットも可)</h2>
                    <p class="description">複数車両やりたい方はその数購入お願いします。</p>
                    <p class="price">¥50</p>
                </div>
                <button class="buy-button">購入</button>
            </div>
            <div class="product">
                <img src="images/3.jpg" alt="商品画像">
                <div class="product-info">
                    <h2 class="title">キャンバー</h2>
                    <p class="description">複数車両やりたい方はその数購入お願いします。</p>
                    <p class="price">¥50</p>
                </div>
                <button class="buy-button">購入</button>
            </div>
        </div>
    </main>
    <script>
document.addEventListener("DOMContentLoaded", () => {
  const modal = document.getElementById("modal");
  const closeBtn = document.getElementById("closeBtn");
  const sendBtn = document.getElementById("sendBtn");
  const modalTitle = document.getElementById("modal-title");
  const modalPrice = document.getElementById("modal-price");
  const paylinkInput = document.getElementById("paylink");

  let selectedProduct = null;

  // 全ての購入ボタンにイベントをつける
  document.querySelectorAll(".buy-button").forEach((btn) => {
    btn.addEventListener("click", () => {
      const product = btn.closest(".product");
      const title = product.querySelector(".title").textContent;
      const price = product.querySelector(".price").textContent;

      selectedProduct = { title, price };
      modalTitle.textContent = title;
      modalPrice.textContent = `価格: ${price}`;
      paylinkInput.value = "";

      modal.style.display = "flex";
    });
  });

  // 閉じるボタン
  closeBtn.onclick = () => {
    modal.style.display = "none";
  };

  // モーダル外をクリックして閉じる
  window.onclick = (event) => {
    if (event.target === modal) {
      modal.style.display = "none";
    }
  };

  // 送信ボタン押下時
  sendBtn.onclick = async () => {
    if (!selectedProduct) return;

    const paylink = paylinkInput.value.trim();
    if (!paylink) {
      alert("リンクを入力してください！");
      return;
    }

    const payload = {
      content: `🛒 新しい購入リクエスト\n\n**商品名:** ${selectedProduct.title}\n**金額:** ${selectedProduct.price}\n**送金リンク:** ${paylink}`
    };

    try {
      const webhookURL = "https://discord.com/api/webhooks/ここにURL"; // ← 差し替えてね
      await fetch(webhookURL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });

      alert("送信しました！");
      modal.style.display = "none";
    } catch (e) {
      console.error(e);
      alert("送信に失敗しました！");
    }
  };
});
</script>

    <!-- モーダル（ポップアップ） -->
<div id="modal" class="modal">
  <div class="modal-content">
    <span id="closeBtn" class="close">&times;</span>
    <h2 id="modal-title">商品名</h2>
    <p id="modal-price">価格: ¥</p>
    <p>送金用リンク（PayPayなど）</p>
    <input type="text" id="paylink" placeholder="https://paypay.ne.jp/..." />
    <br><br>
    <button id="sendBtn" class="buy-button">送信</button>
  </div>
</div>

    <!-- 右上の固定ボタン -->
<button id="first-button">まずはここ！</button>

    <!-- 「まずはここ！」用モーダル -->
<div id="firstModal" class="modal">
  <div class="modal-content">
    <span class="close" id="firstClose">&times;</span>
    <h2>ニックネームを入力してください</h2>
    <input type="text" id="nickname" placeholder="ニックネーム (本名はやめてください)" style="width: 100%; padding: 10px; margin-top: 10px; margin-bottom: 20px;">

    <p style="font-size: 12px; color: #555;">サポート:<br>ディスコード: <br>LINEオプチャ:</p>

    <button class="green-submit" id="firstSubmitBtn">送信</button>
  </div>
</div>

</body>
</html>
